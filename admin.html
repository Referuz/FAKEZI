<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/boostrap/css/bootstrap.min.css">
</head>
<body class="container">
    <div class="container mt-5">
        <button class="btn form-control btn-danger mb-5" onclick="deleteItem()">
            Delete products
        </button>
        <button class="btn form-control btn-success mb-5" onclick="agregarProductos()">
            Add products
        </button>
    </div>
    <script>
        async function deleteItem() {
            let espacio = 0;
            let inicio = 0;
            let fin = 0;
            try{
                const res = await fetch(`https://api.escuelajs.co/api/v1/products/`,{
                    method : "GET",
                    headers : {"Content-Type" : "application/json"}
                });
                const data = await res.json();
                inicio = data[0].id;
                fin = data[data.length - 1].id;
            }catch(x){
                console.log(x);
            }
            for(let i = inicio; i <= fin; i++){
                try{
                    const res = await fetch(`https://api.escuelajs.co/api/v1/products/${i}`,{
                        method : "DELETE",
                        headers : {"Content-Type" : "application/json"}
                    });
                    const data = await res.json();
                    if(data == true){
                        console.log("Se elimino: ",i)
                    }else{
                        if(espacio > 5){
                            break;
                        }else{
                            espacio += 1;
                        }
                    }
                }catch(x){
                    console.log(x);
                    break
                }
            }
        }
        
        async function agregarProductos(){
            try{
                for(let i = 1; i <= 20; i++){
                    let j = 0;
                    let img1 = "";
                    let img2 = "";
                    let img3 = "";
                    if(i <= 5) j = 19;
                    else if(i <= 10) j = 20;
                    else if(i <= 15) j = 21;
                    else if(i <= 20) j = 22;

                    if(j == 19){
                        img1 = "https://i.imgur.com/cSYIczO.jpeg";
                        img2 = "https://i.imgur.com/yVA2ugG.jpeg";
                        img3 = "https://i.imgur.com/fvVekYM.jpeg";
                    }
                    if(j == 20){
                        img1 = "https://i.imgur.com/Dqelwws.jpeg";
                        img2 = "https://i.imgur.com/5j1unZN.jpeg";
                        img3 = "https://i.imgur.com/FucQguW.jpeg";
                    }
                    if(j == 21){
                        img1 = "https://m.media-amazon.com/images/I/61QvPk0cbBL._AC_SX679_.jpg";
                        img2 = "https://m.media-amazon.com/images/I/61T2rzi71QL._AC_SX679_.jpg";
                        img3 = "https://m.media-amazon.com/images/I/61Xb0TfMuxL._AC_SX679_.jpg";
                    }
                    if(j == 22){
                        img1 = "https://m.media-amazon.com/images/I/51fsrhgqjNL._AC_SX679_.jpg";
                        img2 = "https://m.media-amazon.com/images/I/51OH5UDKhjL._AC_SX679_.jpg";
                        img3 = "https://m.media-amazon.com/images/I/51EUfT722BL._AC_SX679_.jpg";
                    }
                    const res = await fetch("https://api.escuelajs.co/api/v1/products/",{
                        method : "POST",
                        headers: {"Content-Type" : "application/json"},
                        body : JSON.stringify({
                            "title": `Producto_00${i}`,
                            "price": 50*i,
                            "description": "Descripcion simple. Nota: Por lo que veo esta api no puede tener productos con el mismo titulo. Lo bueno hice todo con fors jaja ;)",
                            "categoryId": j,
                            "images": [
                                img1,
                                img2,
                                img3
                            ]
                        })
                    });
                    const data = await res.json();
                    console.log("Se agrego con exito",data.id);
                }
            }catch(x){
                console.log(x);
            }
        }
    
    </script>
<script src="/boostrap/js/bootstrap.min.js"></script>
</body>
</html>